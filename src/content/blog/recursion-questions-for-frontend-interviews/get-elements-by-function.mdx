---
seoMetaData:
  title: 'Implement getElementsBy function'
  description: 'Implement getElementsBy by using Javascript closures.'
  ogImage: '/open-graph/blogs/implement-an-array-iterator-function.webp'
  ogImageAlt: 'Implement getElementsBy by using Javascript closures.'
title: 'Implement getElementsBy '
publishedDate: 2024-03-31
blogMeta:
  type: standalone
---

**getElementsBy(\*)** as some common DOM API to find elements matching a certain selector. They are often used to navigate/find elements on a DOM tree. In this blog, we'll learn how to poissble recreate them using recursion.

We'll consider the following HTML document for all the below problems for simplicity

```html
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>

	<body>
		<div id="root">
			<span data-name="1" class="red yellow">1</span>
			<span data-name="2" class="red">2</span>
			<button id="btn">Click Me</button>
			<div>
				<p><span class="red green">Hello</span>World</p>
				<div>
					<b><span data-name="3" class="purple red 123">Bold text</span></b>
				</div>
			</div>
		</div>
	</body>
</html>
```

{/* ======= Variation by tagName ========= */}

<section>
<SubHeading>Variation: By Tag Name</SubHeading>
## 1. By tagName implementation

Implement a getElementsByTagName function which takes a rootElement and a tagSelector, and finds and returns all elements matching the tagName. You can ignore the root element.

```js title="./src/getElementsByTagName.js"
function getElementsByTagName(rootEl, tagName) {
	const result = [];
	const targetTagName = tagName.toLowerCase();

	if (!rootEl) {
		return result;
	}

	function transverseEl(element) {
		const elTagName = element.tagName.toLowerCase();

		if (elTagName === targetTagName) {
			result.push(element);
		}

		for (const childEl of element.children) {
			transverseEl(childEl);
		}
	}

	for (const child of rootEl.children) {
		transverseEl(child);
	}

	return result;
}

// Usage
const output = getElementsByTagName(document.getElementById('root'), 'span');

// Yields the following HTML elements:
// [span.red.yellow, span.red, span.red.green, span.purple.red.123]
console.log(output);
```

</section>
